import { useState, useEffect } from 'react';

export default function Home() {
    const [logs, setLogs] = useState([]);

    useEffect(() => {
        const fetchLogs = async () => {
            const res = await fetch('/api/log');
            const data = await res.json();
            setLogs(data.logs || []); 
        };

        fetchLogs();
        const intervalId = setInterval(fetchLogs, 2000);

        return () => clearInterval(intervalId);
    }, []);

    return (
        <div style={styles.container}>
            <h1 style={styles.title}>NoGems Logs</h1>
            <div style={styles.logContainer}>
                {logs.length > 0 ? (
                    <ul style={styles.logList}>
                        {logs.map((log, index) => (
                            <li key={index} style={styles.logItem}>
                                <pre style={styles.codeBlock}>{log}</pre>
                            </li>
                        ))}
                    </ul>
                ) : (
                    <p style={styles.noLogs}>No logs available.</p>
                )}
            </div>
        </div>
    );
}

const styles = {
    container: {
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        minHeight: '100vh',
        backgroundColor: '#2e2b3f',
        color: '#fff',
        fontFamily: '"Clash of Clans", Arial, sans-serif',
    },
    title: {
        fontSize: '3rem',
        marginBottom: '2rem',
        color: '#33ff99',
        textShadow: '2px 2px 0px #000000, 4px 4px 0px #33ff99',
    },
    logContainer: {
        width: '80%',
        maxHeight: '60vh',
        overflowY: 'scroll',
        backgroundColor: '#444466',
        padding: '1rem',
        borderRadius: '15px',
        boxShadow: '0px 0px 20px rgba(0, 255, 0, 0.7)',
        border: '3px solid #ffcc00',
    },
    logList: {
        listStyleType: 'none',
        padding: 0,
        margin: 0,
    },
    logItem: {
        padding: '0.5rem 0',
        borderBottom: '1px solid #666699',
        fontSize: '1.2rem',
    },
    codeBlock: {
        fontFamily: '"Courier New", Courier, monospace',
        backgroundColor: '#2d2d2d',
        padding: '0.5rem',
        borderRadius: '5px',
        color: '#ffffff',
        overflowX: 'auto',
        whiteSpace: 'pre-wrap',
        boxShadow: 'inset 0px 0px 10px rgba(0, 0, 0, 0.5)',
    },
};
